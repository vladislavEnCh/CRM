<head>
  <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet"
  />
</head>
<div class="page-title">
  <h4>
    <a [routerLink]="'/categories'">Category</a>
    <i class="material-icons">keyboard_arrow_right</i>
    {{ !isNew ? "Edit" : "Add" }} category
  </h4>
  <span>
    <button *ngIf="!isNew" class="btn btn-small red" (click)="deleteCategory()">
      <i class="material-icons">delete</i>
    </button>
  </span>
</div>

<div class="row">
  <form [formGroup]="forms" class="col s12 l6">
    <div class="input-field">
      <input
        formControlName="name"
        id="name"
        type="text"
        [ngClass]="{
          invalid: forms.get('name')?.invalid && forms.get('name')?.touched
        }"
      />
      <label for="name">Name</label>
    </div>

    <div>
      <input class="dn" type="file" #input (change)="onFileUpload($event)" />
      <button
        [disabled]="forms.disabled"
        (click)="trigerClick()"
        class="waves-effect waves-light btn orange lighten-2 mb2"
      >
        <i class="material-icons left">backup</i>
        Apload img
      </button>
    </div>

    <div>
      <button
        [disabled]="forms.disabled || forms.invalid"
        (click)="saveChange()"
        class="waves-effect waves-light btn"
      >
        Save changes
      </button>
    </div>
  </form>

  <div class="col s12 l4 center">
    <img
      class="responsive-img h200"
      [src]="imagePreview"
      *ngIf="imagePreview"
    />
  </div>
</div>
<app-position *ngIf="category?._id" [categoryId]="category._id"></app-position>
